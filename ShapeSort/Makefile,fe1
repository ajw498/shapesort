HEADERS	=	Questions.h

LIBS	=	\
		L:Stubs.o.asstubs\
		L:Desk.o.Desk\
		L:AJWLib.o.AJWLib


OBJECTS	=	!RunImage.o\
		Questions.o



CCFLAGS		=	$(CCEXTRA) -mthrowback -mstubs -Wall -O3 -IL:

CC		=	gcc -c $(CCFLAGS)

LINK		=	gcc $(CCFLAGS)

VERSION		=	3D


.c.o:
	$(CC) -DBUILD$(VERSION) $< -o $@

all:	../!Shape$(VERSION)/!RunImage ../!Shape$(VERSION)/Messages ../!Shape$(VERSION)/Templates ../!Shape$(VERSION)/!Sprites ../!Shape$(VERSION)/!Sprites22 ../!Shape$(VERSION)/!Boot ../!Shape$(VERSION)/!Run ../!Shape$(VERSION)/TreeData ../!Shape$(VERSION)/Pictures ../!Shape$(VERSION)/!Help

!RunImage:	$(OBJECTS) $(LIBS)
	$(LINK) -o $@ $(OBJECTS) $(LIBS)


../!Shape$(VERSION):
	mkdir $@

../!Shape$(VERSION)/!RunImage:	!RunImage ../!Shape$(VERSION)
	cp !RunImage $@

../!Shape$(VERSION)/Templates:	Templates ../!Shape$(VERSION)
	cp Templates $@

../!Shape$(VERSION)/!Sprites:	!Sprites ../!Shape$(VERSION)
	cp !Sprites $@

../!Shape$(VERSION)/!Sprites22:	!Sprites22 ../!Shape$(VERSION)
	cp !Sprites22 $@

../!Shape$(VERSION)/!Help:	!Help ../!Shape$(VERSION)
	cp !Help $@

../!Shape$(VERSION)/Messages:	Messages ../!Shape$(VERSION) 
	sed s/XD/$(VERSION)/ Messages > $@

../!Shape$(VERSION)/!Boot:	!Boot ../!Shape$(VERSION) 
	sed s/XD/$(VERSION)/ !Boot > $@
	filetype $@ Obey

../!Shape$(VERSION)/!Run:	!Run ../!Shape$(VERSION) 
	sed s/XD/$(VERSION)/ !Run > $@
	filetype $@ Obey

../!Shape$(VERSION)/TreeData:	TreeData$(VERSION) ../!Shape$(VERSION) 
	cp TreeData$(VERSION) $@

../!Shape$(VERSION)/Pictures:	Pictures$(VERSION) ../!Shape$(VERSION) 
	cp Pictures$(VERSION) $@
	rm $@/CVS
	touch $@

clean:
	rm !RunImage
	rm *.o

sparkling:	clean
	rm ../!Shape2D
	rm ../!Shape3D

